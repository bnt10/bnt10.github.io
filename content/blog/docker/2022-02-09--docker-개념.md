---
title: Docker - 설치부터(2)
date: '2022-02-08'
template: 'post'
draft: true
slug: 'docker-설치(2)'
category: 'docker'
tags:
  - 'docker'
description: 'Docker 설치부터(2)'
socialImage: '/media/gatsby_icon.png'
---

### 1. Docker 기술 개념

도커의 Container, Image에 대해서 알아 보겠습니다.

#### 컨테이너(Container)

정의: 컨테이너(Container)는 운영체제 수준에서 다른 실행환경과의 간섭없이 격리하는 기술을 말합니다.

궁금증: 컨테이너를 공부하다 보면 쉽게 찾아 볼 수 있는 다른 가상환경 기술인 **가상머신(Virtual Machine)**과의 차이
는 무엇있가?

제가 공부하면서 가장 큰 차이점으로 생각된 부분은 **'어디까지를 가상화 하는가?'**

**컨테이너**의 경우 운영체제의 커널을 공유하여 그 위에 격리환경을 구성합니다.  
**가상머신**의 경우 하드웨어조차도 가상화시켜 격리환경을 구성합니다.

두 차이점 때문에 일반적으로 컨테이너가 낮은 오버헤드 환경을 제공합니다.  
다만 그렇다면 **'가상머신은 사용할 필요가 없는가?'** 라는 생각을 하게 되었습니다.

가상머신의 활용분야: 가상화를 하드웨어까지 하기 때문에
개발상 하드웨어 요구 사항이 있거나 Windows, MacOS등 서로 호환성이부족한 플랫폼 개발

#### 이미지(Image)

공부하면서 이해한 도커의 이미지의 개념은 일종의 객체지향의 클래스라고 생각되었습니다.  
이미지라는 클래스를 통해서 컨테이러나는 객체를 만드는 것이라 가정하면 이미지는 컨테이너 생성을 위한 파일, 설정등을 포함하고 상태값을 가지지않는 **Imutable**상태로 저장되기 때문입니다.

또한 같은 이미지는 여러개의 컨테이너를 생성할 수 있고 컨테이너의 상태의 변경은  
컨테이너에만 적용되고 이미지에는 적용되지 않습니다.

이미지의 구성은 N층의 레이어를 통해 구성됩니다.  
예를 들어서 base가 되는 Ubuntu 레이어 위에 Nginx layer를 올리는 방식으로  
N층의 레이어 구성을 통해서 하나의 이미지가 구성됩니다.

docker file 에 추가적인 layer가 올라가게 될 경우
delta (difference between the old and new image) update가 수행됩니다.

실제 이미지를 만드는 방법은 다음과 같습니다.

**Dockerfile**이란 파일을 작성하여 **Build**하는 과정이 필요합니다.  
참고 : [자세한 작성가이드 입니다.](https://docs.docker.com/develop/develop-images/dockerfile_best-practices/)

```javascript
FROM ubuntu:18.04
COPY . /app
RUN make /app
CMD python /app/app.py

```

각 명령어들은 하나의 **layer**가 됩니다.

- FROM : ubuntu:18.04라는 DockerImage를 이용해서 레이어를 생성

- COPY : . /app . <- host /app <- container

- RUN : 명령을 실행할 때 마다 layer가 생성되고 캐시된다.

- CMD : 컨테이너가 실행되는 시점에 사용되는 명령어

#계속
